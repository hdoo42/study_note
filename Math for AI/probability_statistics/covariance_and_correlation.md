---
id: covariance_and_correlation
aliases:
  - 공분산과 상관계수
tags:
  - probability
  - statistics
  - covariance
  - correlation
  - pairwise
---
# Covariance & Correlation (Pairwise View)

## 1  |  데이터 구조: 2차원 점 $(x,y)$

- 하나의 **데이터 포인트**는 좌표평면 상의 점 $(x_i, y_i)$.
- $n$개의 점 $\{(x_1,y_1),\dots,(x_n,y_n)\}$이 **표본**(sample)을 이룹니다.  
- 목표: 두 변수 $X$와 $Y$가 **함께** 어떻게 변하는지 정량화.

---

## 2  |  표본 공분산 (Sample Covariance)

$$
s_{XY}
= \frac{1}{n-1}\sum_{i=1}^{n}(x_i-\bar{x})\,(y_i-\bar{y}),
$$

- $\bar{x}=\dfrac{1}{n}\sum_{i=1}^{n}x_i$  
- $\bar{y}=\dfrac{1}{n}\sum_{i=1}^{n}y_i$  
- $s_{XY}>0$: 두 변수는 **같은 방향**(동시 증가·감소) 경향  
- $s_{XY}<0$: 두 변수는 **반대 방향** 경향  
- $s_{XY}=0$: 선형 관계가 없음 (독립은 아님)

> **Pairwise 해석**  
> 각 점의 편차 $(x_i-\bar{x},\,y_i-\bar{y})$를 곱하여 모든 쌍의 상호작용을 합산 → 두 축의 **공동 변동성** 측정.

---

## 3  |  상관계수 (Correlation Coefficient)

공분산을 **표준화**하여 단위 의존성을 제거한 척도:

$$
r_{XY}
= \frac{s_{XY}}{s_X\,s_Y},
$$

- $s_X=\sqrt{\dfrac{1}{n-1}\sum_{i=1}^{n}(x_i-\bar{x})^{2}}$  
- $s_Y=\sqrt{\dfrac{1}{n-1}\sum_{i=1}^{n}(y_i-\bar{y})^{2}}$  
- 범위: $-1 \le r_{XY} \le 1$

| $r_{XY}$ 값 | 해석 |
|-------------|------|
| $+1$ | 완전한 양의 선형 관계 |
| $0$ | 선형 관계 없음 |
| $-1$ | 완전한 음의 선형 관계 |

---

## 4  |  요약 흐름

1. **편차 계산**: $(x_i-\bar{x})$, $(y_i-\bar{y})$
2. **편차 곱의 합산** → $s_{XY}$
3. **표준편차로 나눔** → $r_{XY}$
   - 공분산의 **스케일** 문제 해결
   - 단위 없는 $[-1,1]$ 척도 제공

---

## 5  |  실전 팁

- **샘플 수 적을 때**: $r_{XY}$가 극단값이어도 우연일 가능성 → 신뢰구간 체크.  
- **비선형 관계**: $r_{XY}\approx0$이어도 강한 비선형 패턴이 숨을 수 있음 → 산점도 확인.

---

## 6  |  관련 개념

- **공분산 행렬**: 다변량 $(X_1,\dots,X_m)$ 전체 쌍의 $s_{X_iX_j}$를 모아놓은 $m\times m$ 행렬.  
- **피어슨 상관계수**: 위의 $r_{XY}$와 동일.  
- **스피어만·켄달 계수**: 순위 기반 상관 측도 (비선형·비모수).
